---
title: 一个手写configure文件
author: 悟道
layout: post
permalink: /?p=2009
categories:
  - C
---
<table>
  <tr cellpadding=0><td>
    热度:
  </td><td cellpadding=0><img src='http://210.75.224.29/wordpress/wp-content/plugins/statpresscn/images/sun.gif' width=10 height=10 border=0 /></td><td cellpadding=0><img src='http://210.75.224.29/wordpress/wp-content/plugins/statpresscn/images/sun_dark.gif' width=10 height=10 border=0 /></td><td cellpadding=0><img src='http://210.75.224.29/wordpress/wp-content/plugins/statpresscn/images/sun_dark.gif' width=10 height=10 border=0 /></td><td cellpadding=0><img src='http://210.75.224.29/wordpress/wp-content/plugins/statpresscn/images/sun_dark.gif' width=10 height=10 border=0 /></td><td cellpadding=0><img src='http://210.75.224.29/wordpress/wp-content/plugins/statpresscn/images/sun_dark.gif' width=10 height=10 border=0 /></td></tr>
</table>

<div class="wp_codebox">
  <table>
    <tr id="p2009156">
      <td class="code" id="p2009code156">
        <pre class="bash" style="font-family:monospace;">&nbsp;
<span style="color: #666666; font-style: italic;">#!/bin/bash</span>
&nbsp;
usage<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #7a0874; font-weight: bold;">&#123;</span>
        <span style="color: #c20cb9; font-weight: bold;">cat</span> <span style="color: #cc0000; font-style: italic;">&lt;&lt;EOF
Usage:
&nbsp;
$0 options
&nbsp;
Options:
        -h      display this help and exit
        -p PREFIX       install architecture-independent files in PREFIX
                                [complete path needed, default /usr/bin]
        -l LIBS         install perl libs in LIBS
                                [complete path needed, default standard \
                                perl lib, the path next to last \
                                in your @INC]
EOF</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #007800;">prefix</span>=<span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>bin
<span style="color: #007800;">ctperllib</span>=<span style="color: #000000; font-weight: bold;">`</span><span style="color: #c20cb9; font-weight: bold;">perl</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">'print join("\n", @INC);'</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">tail</span> <span style="color: #660033;">-n</span> <span style="color: #000000;">2</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">head</span> <span style="color: #660033;">-n</span> <span style="color: #000000;">1</span><span style="color: #000000; font-weight: bold;">`</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">while</span> <span style="color: #7a0874; font-weight: bold;">getopts</span> <span style="color: #ff0000;">"hp:l:"</span> OPTION
<span style="color: #000000; font-weight: bold;">do</span>
        <span style="color: #000000; font-weight: bold;">case</span> <span style="color: #007800;">$OPTION</span> <span style="color: #000000; font-weight: bold;">in</span>
                h<span style="color: #7a0874; font-weight: bold;">&#41;</span>
                        usage
                        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">1</span>
                        <span style="color: #000000; font-weight: bold;">;;</span>
                p<span style="color: #7a0874; font-weight: bold;">&#41;</span>
                        <span style="color: #007800;">prefix</span>=<span style="color: #007800;">$OPTARG</span>
                        <span style="color: #007800;">prefix</span>=<span style="color: #800000;">${prefix%%/}</span>
                        <span style="color: #666666; font-style: italic;">#prefix=${prefix}/</span>
                        <span style="color: #000000; font-weight: bold;">;;</span>
                l<span style="color: #7a0874; font-weight: bold;">&#41;</span>
                        <span style="color: #007800;">ctperllib</span>=<span style="color: #007800;">$OPTARG</span>
                        <span style="color: #007800;">ctperllib</span>=<span style="color: #800000;">${ctperllib%%/}</span>
                        <span style="color: #666666; font-style: italic;">#ctperllib=${ctperllib}/</span>
                        <span style="color: #000000; font-weight: bold;">;;</span>
                ?<span style="color: #7a0874; font-weight: bold;">&#41;</span>
                        usage
                        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">1</span>
                        <span style="color: #000000; font-weight: bold;">;;</span>
        <span style="color: #000000; font-weight: bold;">esac</span>
<span style="color: #000000; font-weight: bold;">done</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">test</span> $<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">expr</span> index <span style="color: #800000;">${prefix}</span> <span style="color: #ff0000;">'/'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #660033;">-ne</span> <span style="color: #000000;">1</span> <span style="color: #000000; font-weight: bold;">||</span> \
        <span style="color: #7a0874; font-weight: bold;">test</span> $<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">expr</span> index <span style="color: #800000;">${ctperllib}</span> <span style="color: #ff0000;">'/'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #660033;">-ne</span> <span style="color: #000000;">1</span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"error: expected an absolute directory name for -p and -l"</span>
        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">1</span>
<span style="color: #000000; font-weight: bold;">fi</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #ff0000;">"<span style="color: #007800;">${prefix}</span>"</span> == <span style="color: #ff0000;">"/usr/bin"</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000; font-weight: bold;">&&</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> $<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">whoami</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #ff0000;">'root'</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">"<span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>It seems like you \e[01;31mdo not\e[00m have \e[01;31mroot\e[00m priviledge. <span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>I will install binary file to \e[01;31m<span style="color: #780078;">`pwd`</span>/bin\e[00m and <span style="color: #000099; font-weight: bold;">\n</span>perl module to \e[01;31m<span style="color: #780078;">`pwd`</span>/perllib\e[00m seperately instead of default parameter. <span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>If you do not like it, you can rerun like $0 -p favorite_bin -l favorite_lib   <span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>"</span>
        <span style="color: #007800;">prefix</span>=<span style="color: #000000; font-weight: bold;">`</span><span style="color: #7a0874; font-weight: bold;">pwd</span><span style="color: #000000; font-weight: bold;">`/</span>bin
        <span style="color: #007800;">ctperllib</span>=<span style="color: #000000; font-weight: bold;">`</span><span style="color: #7a0874; font-weight: bold;">pwd</span><span style="color: #000000; font-weight: bold;">`/</span>perllib
<span style="color: #000000; font-weight: bold;">fi</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">type</span> nafold <span style="color: #000000; font-weight: bold;">&gt;/</span>dev<span style="color: #000000; font-weight: bold;">/</span>null <span style="color: #000000;">2</span><span style="color: #000000; font-weight: bold;">&gt;&</span><span style="color: #000000;">1</span>
<span style="color: #007800;">error</span>=<span style="color: #007800;">$?</span>
<span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">test</span> <span style="color: #007800;">$error</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #000000;"></span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"Checking nafold.............................................[FAILED]"</span>
<span style="color: #000000; font-weight: bold;">else</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"Checking nafold..........................................[SUCCESSED]"</span>
<span style="color: #000000; font-weight: bold;">fi</span>
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">gcc</span> <span style="color: #660033;">-v</span> <span style="color: #000000;">2</span><span style="color: #000000; font-weight: bold;">&gt;/</span>dev<span style="color: #000000; font-weight: bold;">/</span>null
<span style="color: #007800;">error</span>=<span style="color: #007800;">$?</span>
<span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">test</span> <span style="color: #007800;">$error</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #000000;"></span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"Checking gcc................................................[FAILED]"</span>
        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">1</span>
<span style="color: #000000; font-weight: bold;">else</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"Checking gcc.............................................[SUCCESSED]"</span>
<span style="color: #000000; font-weight: bold;">fi</span>
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">perl</span> <span style="color: #660033;">-v</span> <span style="color: #000000; font-weight: bold;">&gt;/</span>dev<span style="color: #000000; font-weight: bold;">/</span>null <span style="color: #000000;">2</span><span style="color: #000000; font-weight: bold;">&gt;&</span><span style="color: #000000;">1</span>
<span style="color: #007800;">error</span>=<span style="color: #007800;">$?</span>
<span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">test</span> <span style="color: #007800;">$error</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #000000;"></span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"Checking perl...............................................[FAILED]"</span>
        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">1</span>
<span style="color: #000000; font-weight: bold;">else</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">"Checking perl............................................[SUCCESSED]"</span>
<span style="color: #000000; font-weight: bold;">fi</span>
&nbsp;
&nbsp;
<span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">"Please run \e[01;31mmake\e[00m and \e[01;31mmake install\e[00m."</span>
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">cat</span> <span style="color: #000000; font-weight: bold;">&lt;&lt;</span>EOF <span style="color: #000000; font-weight: bold;">&gt;</span>Makefile
<span style="color: #007800;">cc</span>=<span style="color: #c20cb9; font-weight: bold;">gcc</span>
<span style="color: #007800;">CFLAGS</span>= <span style="color: #660033;">-g</span> <span style="color: #660033;">-Wall</span> <span style="color: #660033;">-fopenmp</span>
<span style="color: #007800;">LIBS</span>=-I\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>shell <span style="color: #7a0874; font-weight: bold;">pwd</span><span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">/</span>header
<span style="color: #007800;">prefix</span>=<span style="color: #800000;">${prefix}</span>
<span style="color: #007800;">perllib</span>=<span style="color: #800000;">${ctperllib}</span>
SHELL:=<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">bash</span>
&nbsp;
<span style="color: #007800;">CPPFLAGS</span>= \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>LIBS<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
OBJECTS = main.o psRobot_tar.o
SOURCES = main.c psRobot_tar.c
&nbsp;
<span style="color: #007800;">PERLM_N</span>=\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>shell <span style="color: #c20cb9; font-weight: bold;">ls</span> module<span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #007800;">PERLM</span>=\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>addprefix module<span style="color: #000000; font-weight: bold;">/</span>, \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>PERLM_N<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
<span style="color: #007800;">psRobot_mir</span>=psRobot_mir.pl
<span style="color: #007800;">psRobot_mir_tmp</span>=\$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">basename</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #007800;">psRobot_mir_bin</span>=\<span style="color: #800000;">${prefix}</span><span style="color: #000000; font-weight: bold;">/</span>psRobot_mir
<span style="color: #007800;">psRobot_map</span>=psRobot_map.pl
<span style="color: #007800;">psRobot_map_tmp</span>=\$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">basename</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #007800;">psRobot_map_bin</span>=\<span style="color: #800000;">${prefix}</span><span style="color: #000000; font-weight: bold;">/</span>psRobot_map
<span style="color: #007800;">psRobot_deg</span>=psRobot_deg.pl
<span style="color: #007800;">psRobot_deg_tmp</span>=\$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">basename</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #007800;">psRobot_deg_bin</span>=\<span style="color: #800000;">${prefix}</span><span style="color: #000000; font-weight: bold;">/</span>psRobot_deg
<span style="color: #007800;">psR_map_untreated</span>=psR_map_untreated
<span style="color: #007800;">psRobot_tar</span>=psRobot_tar
&nbsp;
<span style="color: #007800;">psRobot_bin</span>= \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psR_map_untreated<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_tar<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
all: _\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psR_map_untreated<span style="color: #7a0874; font-weight: bold;">&#41;</span> _\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_tar<span style="color: #7a0874; font-weight: bold;">&#41;</span> _modifyPerlInMake
        <span style="color: #000000; font-weight: bold;">@</span>-<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">chmod</span> a+x \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_bin<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">"\<span style="color: #000099; font-weight: bold;">\n</span>\<span style="color: #000099; font-weight: bold;">\n</span>make \\e[01;31msuccessed\\e[00m. Please run \\e[01;31mmake install\\e[00m."</span>
&nbsp;
.c.o:
        \$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">cc</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>CFLAGS<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #660033;">-c</span> <span style="color: #660033;">-o</span> \$<span style="color: #000000; font-weight: bold;">@</span> \$<span style="color: #000000; font-weight: bold;">&lt;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>LIBS<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">%</span>.d: <span style="color: #000000; font-weight: bold;">%</span>.c
        <span style="color: #000000; font-weight: bold;">@</span><span style="color: #000000; font-weight: bold;">set</span> -e; <span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> \$<span style="color: #000000; font-weight: bold;">@</span>; \\
        \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>CC<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #660033;">-MM</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>CPPFLAGS<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #000000; font-weight: bold;">&lt;</span> <span style="color: #000000; font-weight: bold;">&gt;</span> \$<span style="color: #000000; font-weight: bold;">@</span>.\$\$\$\$; \\
        <span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #ff0000;">'s,\(\$*\)\.o[ :]*,\1.o \$@ : ,g'</span> <span style="color: #000000; font-weight: bold;">&lt;</span> \$<span style="color: #000000; font-weight: bold;">@</span>.\$\$\$\$ <span style="color: #000000; font-weight: bold;">&gt;</span> \$<span style="color: #000000; font-weight: bold;">@</span>; \\
        <span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> \$<span style="color: #000000; font-weight: bold;">@</span>.\$\$\$\$
&nbsp;
include \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>SOURCES:.c=.d<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
&nbsp;
_\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psR_map_untreated<span style="color: #7a0874; font-weight: bold;">&#41;</span>: main.o
        \$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">cc</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>CFLAGS<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #660033;">-o</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psR_map_untreated<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$^ \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>LIBS<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
_\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_tar<span style="color: #7a0874; font-weight: bold;">&#41;</span>: psRobot_tar.o
        \$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">cc</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>CFLAGS<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #660033;">-o</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_tar<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$^ \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>LIBS<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
_modifyPerlInMake:
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #ff0000;">"/^use lib.*;/d"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000; font-weight: bold;">&gt;</span>\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">"1 a\\use lib <span style="color: #000099; font-weight: bold;">\"</span><span style="color: #780078;">`pwd`</span>/module<span style="color: #000099; font-weight: bold;">\"</span>;"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'/^my \$\$lib_dir = .*;/d'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'2 a\my \$\$lib_dir = \"`pwd`\";'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #ff0000;">"/^use lib.*;/d"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000; font-weight: bold;">&gt;</span>\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">"1 a\\use lib <span style="color: #000099; font-weight: bold;">\"</span><span style="color: #780078;">`pwd`</span>/module<span style="color: #000099; font-weight: bold;">\"</span>;"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'/^my \$\$lib_dir = .*;/d'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'2 a\my \$\$lib_dir = \"`pwd`\";'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #ff0000;">'/^my \$\$lib_dir = .*;/d'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000; font-weight: bold;">&gt;</span>\$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'2 a\my \$\$lib_dir = \"`pwd`\";'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
_modifyPerlInMakeInstall:
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">"/^use lib.*;/d"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">"1 a\\use lib '<span style="color: #000099; font-weight: bold;">\$</span>(perllib)';"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'/^my \$\$lib_dir = .*;/d'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'2 a\my \$\$lib_dir = \"${prefix}/\";'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">"/^use lib.*;/d"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">"1 a\\use lib '<span style="color: #000099; font-weight: bold;">\$</span>(perllib)';"</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'/^my \$\$lib_dir = .*;/d'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'2 a\my \$\$lib_dir = \"${prefix}/\";'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'/^my \$\$lib_dir = .*;/d'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'2 a\my \$\$lib_dir = \"${prefix}/\" ;'</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">install</span>: _modifyPerlInMakeInstall
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">mkdir</span> <span style="color: #660033;">-p</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>prefix<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #ff0000;">"<span style="color: #000099; font-weight: bold;">\$</span>(prefix)"</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #ff0000;">"<span style="color: #780078;">`pwd`</span>"</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span> <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">cp</span> <span style="color: #660033;">-f</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_bin<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>prefix<span style="color: #7a0874; font-weight: bold;">&#41;</span>; <span style="color: #000000; font-weight: bold;">fi</span>
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">mkdir</span> <span style="color: #660033;">-p</span> \<span style="color: #800000;">${perllib}</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #ff0000;">"<span style="color: #000099; font-weight: bold;">\$</span>(prefix)"</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #ff0000;">"<span style="color: #780078;">`pwd`</span>"</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span> <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">cp</span> <span style="color: #660033;">-f</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>PERLM<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>perllib<span style="color: #7a0874; font-weight: bold;">&#41;</span>; <span style="color: #000000; font-weight: bold;">fi</span>
        <span style="color: #000000; font-weight: bold;">@</span>-<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">chmod</span> a+x \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_bin<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@</span>-<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">chmod</span> a+x \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>addprefix \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>prefix<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">/</span>, \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_bin<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">@</span><span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> \$\$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">whoami</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #ff0000;">'root'</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span> \\
                <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">'export PATH=\$(prefix):\$\${PATH}'</span> <span style="color: #000000; font-weight: bold;">&gt;&gt;</span>~<span style="color: #000000; font-weight: bold;">/</span>.bashrc; \\
                <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">'export PERL5LIB=\$(perllib):\$\${PERL5LIB}'</span> <span style="color: #000000; font-weight: bold;">&gt;&gt;</span>~<span style="color: #000000; font-weight: bold;">/</span>.bashrc;\\
                <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">"<span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span> Install finished! <span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>Please run the following command to update your environment variable. <span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>***********\\e[01;31msource <span style="color: #000099; font-weight: bold;">\$</span><span style="color: #000099; font-weight: bold;">\$</span>{HOME}/.bashrc\\e[00m***********"</span>; <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">'export PERL5LIB=\$(perllib):\$\${PERL5LIB}'</span> <span style="color: #000000; font-weight: bold;">&gt;&gt;/</span>etc<span style="color: #000000; font-weight: bold;">/</span>profile; <span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>profile;  <span style="color: #000000; font-weight: bold;">fi</span>
                <span style="color: #000000; font-weight: bold;">@</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">"<span style="color: #000099; font-weight: bold;">\n</span>If you want to uninstall, run make uninstall."</span>
&nbsp;
&nbsp;
uninstall: clean cleanBin
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>addprefix \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>prefix<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">/</span>, \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_bin<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> \\
            \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>addprefix \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>perllib<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">/</span>, \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>PERLM_N<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> \$\$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">whoami</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000; font-weight: bold;">!</span>= <span style="color: #ff0000;">'root'</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span> \\
                <span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'s#export PATH=\$(prefix):.*##g'</span> ~<span style="color: #000000; font-weight: bold;">/</span>.bashrc; \\
                <span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'s#export PERL5LIB=\$(perllib):.*##g'</span> ~<span style="color: #000000; font-weight: bold;">/</span>.bashrc;\\
                <span style="color: #7a0874; font-weight: bold;">source</span> ~<span style="color: #000000; font-weight: bold;">/</span>.bashrc; <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #c20cb9; font-weight: bold;">sed</span> <span style="color: #660033;">-i</span> <span style="color: #ff0000;">'s#export PERL5LIB=\$(perllib):.*##g'</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>profile; <span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>profile;<span style="color: #000000; font-weight: bold;">fi</span>
&nbsp;
clean:
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>OBJECTS<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> <span style="color: #000000; font-weight: bold;">*</span>.d
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> <span style="color: #000000; font-weight: bold;">*</span>.d<span style="color: #000000; font-weight: bold;">*</span>
cleanBin:
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_tar<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psR_map_untreated<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_mir_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_map_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span> \$<span style="color: #7a0874; font-weight: bold;">&#40;</span>psRobot_deg_tmp<span style="color: #7a0874; font-weight: bold;">&#41;</span>
.PHONY:clean cleanBin <span style="color: #c20cb9; font-weight: bold;">install</span> uninstall
EOF</pre>
      </td>
    </tr>
  </table>
</div>