---
title: IGV and IGVtools usage
author: 悟道
layout: post
categories:
  - seq
  - NGS
  - letter
tags:
  - igv
---

#### Create your own .genome file

1. Click `Genomes`>`Create .genome File` in menu bar of IGV. IGV will
   popup a window for entering needed information.

2. Enter an ID and a descriptive name for the genome.

3. Enter the path on your file system or a web URL to the FASTA file
   for the genome. If the FASTA file has not already been indexed, 
   an index will be created during the import process. This will 
   generate a file with `fai` suffix in the same directory as the FASTA
   file; Or one can index genome FASTA file using `samtools faidx
   genome.fasta`.

4. Optionally, specify the cytoband file and the annotation (gene) file. 
	* `cytoband` can be downloaded from UCSC like 
	[http://hgdownload.cse.ucsc.edu/goldenPath/mm9/database/](http://hgdownload.cse.ucsc.edu/goldenPath/mm9/database/)
	* Annotation file should be GTF format. It can be the file 
	  generated by `cufflinks` or `cuffcomapre`. General GTF file
	  can be downloaded using [UCSC Table
	  Browser](http://blog.genesino.com/2013/05/ucsc-usages/).

5. If the sequence (chromosome) names differ between your FASTA and 
   annotation files, you might need to create an 
   [`alias`](http://www.broadinstitute.org/software/igv/LoadData/#aliasfile) file to 
   provide a mapping between the different names. 
   Certain well-known aliases are built into IGV and do not require 
   an alias file. These include mappings that involve adding or 
   removing the prefix `chr` to the name, for example  `1 > chr1` and
   `chr1 > 1`.  Also, NCBI identifiers of the form 
   `gi|125745044|ref|NC_002229.3|` in a FASTA file will be mapped to 
   names of the form `NC_002229.3` in the corresponding GFF file.

6. Click `Save` and select the directory in which to save the genome 
   archive (`*.genome`).

#### Transfer BAM file to tdf or wig (Index BAM first)

```
igvtools count --strands first --includeDuplicates rnaseq.bam rnaseq.tdf,rnaseq.wig mm9
igvtools count --strands first --includeDuplicates --pairs -w 1 rnaseq.bam rnaseq.tdf,rnaseq.wig mm9
```

#### IGV批量截图时包含红色标记区域  

* 自动截图前，先把要截图的区域导入，然后再运行batch script

